<script type="text/javascript">
    $("textarea[name=<{$lang}>]").recurrenceinput({
    	readOnly: false,
        firstDay: 0,
        // "REMOTE" FIELD
        startField: "connected_start",
        startFieldYear: null,
        startFieldMonth: null,
        startFieldDay: null,
        ajaxURL: document.URL,
        // FORM OVERLAY
        formOverlay: {
            speed: 'fast',
            fixed: false
        },
        // JQUERY TEMPLATE NAMES
        template: {
            form: '#jquery-recurrenceinput-form-tmpl',
            display: '#jquery-recurrenceinput-display-tmpl'
        },
        // RECURRENCE TEMPLATES
        rtemplate: {
            daily: {
                rrule: 'FREQ=DAILY',
                fields: [
                    'ridailyinterval',
                    'rirangeoptions'
                ]
            },
            mondayfriday: {
                rrule: 'FREQ=WEEKLY;BYDAY=MO,FR',
                fields: [
                    'rirangeoptions'
                ]
            },
            weekdays: {
                rrule: 'FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR',
                    fields: [
                        'rirangeoptions'
                    ]
                },
                weekly: {
                    rrule: 'FREQ=WEEKLY',
                    fields: [
                        'riweeklyinterval',
                        'riweeklyweekdays',
                        'rirangeoptions'
                    ]
                },
                monthly: {
                    rrule: 'FREQ=MONTHLY',
                    fields: [
                        'rimonthlyinterval',
                        'rimonthlyoptions',
                        'rirangeoptions'
                    ]
                },
                yearly: {
                    rrule: 'FREQ=YEARLY',
                    fields: [
                        'riyearlyinterval',
                        'riyearlyoptions',
                        'rirangeoptions'
                    ]
                }
            }
        },

        localize: function (language, labels) {
            LABELS[language] = labels;
        },

        setTemplates: function (templates, titles) {
            var lang, template;
            tool.conf.rtemplate = templates;
            for (lang in titles) {
                if (titles.hasOwnProperty(lang)) {
                    for (template in titles[lang]) {
                        if (titles[lang].hasOwnProperty(template)) {
                            LABELS[lang].rtemplate[template] = titles[lang][template];
                        }
                    }
                }
            }
        }
    });
</script>

<script type="text/javascript">
        // You set up the translation with the localize method:
        $.tools.recurrenceinput.localize("<{$lang}>", {
            displayUnactivate: 'Does not repeat',
	        displayActivate: 'Repeats every',
	        edit: 'Edit...',
	        add:  'Add',
	        refresh: 'Refresh',
	
	        title: 'Repeat',
	        preview: 'Selected dates',
	        addDate: 'Add date',
	
	        recurrenceType: 'Repeats:',
	
	        dailyInterval1: 'Repeat every:',
	        dailyInterval2: 'days',
	
	        weeklyInterval1: 'Repeat every:',
	        weeklyInterval2: 'week(s)',
	        weeklyWeekdays: 'Repeat on:',
	        weeklyWeekdaysHuman: 'on:',
	
	        monthlyInterval1: 'Repeat every:',
	        monthlyInterval2: 'month(s)',
	        monthlyDayOfMonth1: 'Day',
	        monthlyDayOfMonth1Human: 'on day',
	        monthlyDayOfMonth2: 'of the month',
	        monthlyDayOfMonth3: 'month(s)',
	        monthlyWeekdayOfMonth1: 'The',
	        monthlyWeekdayOfMonth1Human: 'on the',
	        monthlyWeekdayOfMonth2: '',
	        monthlyWeekdayOfMonth3: 'of the month',
	        monthlyRepeatOn: 'Repeat on:',
	
	        yearlyInterval1: 'Repeat every:',
	        yearlyInterval2: 'year(s)',
	        yearlyDayOfMonth1: 'Every',
	        yearlyDayOfMonth1Human: 'on',
	        yearlyDayOfMonth2: '',
	        yearlyDayOfMonth3: '',
	        yearlyWeekdayOfMonth1: 'The',
	        yearlyWeekdayOfMonth1Human: 'on the',
	        yearlyWeekdayOfMonth2: '',
	        yearlyWeekdayOfMonth3: 'of',
	        yearlyWeekdayOfMonth4: '',
	        yearlyRepeatOn: 'Repeat on:',
	
	        range: 'End recurrence:',
	        rangeNoEnd: 'Never',
	        rangeByOccurrences1: 'After',
	        rangeByOccurrences1Human: 'ends after',
	        rangeByOccurrences2: 'occurrence(s)',
	        rangeByEndDate: 'On',
	        rangeByEndDateHuman: 'ends on',
	
	        including: ', and also',
	        except: ', except for',
	
	        cancel: 'Cancel',
	        save: 'Save',
	
	        recurrenceStart: 'Start of the recurrence',
	        additionalDate: 'Additional date',
	        include: 'Include',
	        exclude: 'Exclude',
	        remove: 'Remove',
	
	        orderIndexes: ['first', 'second', 'third', 'fourth', 'last'],
	        months: [
	            'January', 'February', 'March', 'April', 'May', 'June',
	            'July', 'August', 'September', 'October', 'November', 'December'],
	        shortMonths: [
	            'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
	            'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
	        weekdays: [
	            'Monday', 'Tuesday', 'Wednesday', 'Thursday',
	            'Friday', 'Saturday', 'Sunday'],
	        shortWeekdays: [
	            'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
	
	        longDateFormat: 'mmmm dd, yyyy',
	        shortDateFormat: 'mm/dd/yyyy',
	
	        unsupportedFeatures: 'Warning: This event uses recurrence features not ' +
	                              'supported by this widget. Saving the recurrence ' +
	                              'may change the recurrence in unintended ways:',
	        noTemplateMatch: 'No matching recurrence template',
	        multipleDayOfMonth: 'This widget does not support multiple days in monthly or yearly recurrence',
	        bysetpos: 'BYSETPOS is not supported',
	        noRule: 'No RRULE in RRULE data',
	        noRepeatEvery: 'Error: The "Repeat every"-field must be between 1 and 1000',
	        noEndDate: 'Error: End date is not set. Please set a correct value',
	        noRepeatOn: 'Error: "Repeat on"-value must be selected',
	        pastEndDate: 'Error: End date cannot be before start date',
	        noEndAfterNOccurrences: 'Error: The "After N occurrences"-field must be between 1 and 1000',
	        alreadyAdded: 'This date was already added',
	
	        rtemplate: {
	            daily: 'Daily',
	            mondayfriday: 'Monday and Friday',
	            weekdays: 'Weekday',
	            weekly: 'Weekly',
	            monthly: 'Monthly',
	            yearly: 'Yearly'
	        }
	    });
        // You select the language with one of two methods:
        // Either you set the defauly language in the tool config, which 
        // will change the language for all subsequent recurrenceinputs:
        //   $.tools.recurrenceinput.conf.lang = 'sv';
        // Or you pass it in as a custom config parameter which changes only
        // this input:
        $("textarea[name=<{$lang}>]").recurrenceinput({lang:'<{$lang}>', startField: "connected_start",  ajaxURL: document.URL});
    </script>